@startuml
'https://plantuml.com/sequence-diagram
legend top
US017 - As Product Owner, I want to create User Story and add it to Product Backlog
end legend
skinparam sequenceMessageAlign center
title To create User Story and add it to Product Backlog


class "CreateUsController" {
- projectService
- usService
+ createUs(projectDto, userStoryCreationDto)
}

class "UsService" {
- usRepository
- factoryUserStory
+ createUs(userStoryCreationDto, projectCode)
+ deleteUs(usId)
}

class "ProjectService"{
+ addUsToProductBacklog(usId, projectCode, priority)
+getProjectByCode(code)
}

class "UserStoryCreationDto"{
+userStoryNumber
+actor
+userStoryText
+priority
}

class "ProjectDto"{
+code
}

class "Project"{
-projectCode
-productBacklog
+ addUserStory(priority, usId
}

class "ProductBacklog" {
-userStories
+addUserStory(priority, usId)
}

interface IProjectRepository{
+getProjectByCode(projectCode)
}

class "UserStory"{
- usId
- usNumber
- actor
- usText
- status
-UserStory(usId)
+setValidUserStory(usNumber, usText, actor)
+setUsNumber(usNumber)
+setActor(actor)
+setUsText(usText)
+has(usNumber)
+setStatus(status)
}

interface "IFactoryUserStory" {
+ createUserStory(userStoryCreationDto, projectCode)
}

interface "IUsRepository" {
-userStories
+add(userStory)
+delete(usId)
}

"CreateUsController""1"-->"1" "UsService": has
"CreateUsController" "1"-->"1" "ProjectService": has
"CreateUsController" ..>"ProjectDto": uses
"ProjectService" ..> "Project": uses
"ProjectService" "1"-->"1" "IProjectRepository": contains
"IProjectRepository" "1"-->"*" "Project": has
"Project" "1"-->"1" "ProductBacklog": has
"UsService" "1"-->"1" "IFactoryUserStory": has
"IFactoryUserStory" "1"..>"*" "UserStory": creates
"UsService" "1"-->"1" "IUsRepository": contains
"IUsRepository" "1"-->"*" "UserStory": has
"UserStoryCreationDto" <.. "IFactoryUserStory": uses
@enduml