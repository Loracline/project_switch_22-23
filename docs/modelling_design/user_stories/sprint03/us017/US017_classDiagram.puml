@startuml
'https://plantuml.com/sequence-diagram
legend top
US017 - As Product Owner, I want to create User Story and add it to Product Backlog
end legend
skinparam sequenceMessageAlign center
title To create User Story and add it to Product Backlog


class "CreateUsController" {
- UsService
- ProjectService
+ createUserStory(projectDto,userStoryCreationDto)
}

class "UsService" {
- FactoryUserStory
- usRepository
+ createUs(userStoryCreationDto,projectCode)
+  add(userStory)
}

class "UsRepository" {
-userStory
+add(userStory)
}

class "ProjectService"{
-ProductBacklog
+ addUserStoryToProductBacklog(usId,projectCode,priority)
}

class "ProductBacklog" {
-priority
-usId
+addUserStory(priority,usId)
}

class "UserStory"{
- usId
- usNumber
- actor
- usText
- status
- acceptanceCriteria
- effort
-UserStory(usId)
+setStatus(status)
+setUsText(usText)
+setUsNumber(usNumber)
+setEffort(effortEstimate)
+setActor(Actor actor)
+has(usNumber)
+toString()
}

interface "FactoryUserStory" {
+ createUserStory(userStoryCreationDto)
}

class "UserStoryCreationDto"{
+userStoryNumber
+actor
+userStoryText
+getPriority()
}

class "ProjectDto"{
+projectCode
+getProjectCode()
}

"CreateUsController""1"-->"1" "UsService"
"UsService" "1"-->"1" "FactoryUserStory"
"UserStoryCreationDto" <.. "CreateUsController"
"UserStoryCreationDto" <. "UsService"
"UserStoryCreationDto" <. "FactoryUserStory"
"FactoryUserStory" "1"->"*" "UserStory"
"ProjectDto" <. "UsService"
"UsService" "1"->"1" "UsRepository"
"CreateUsController" "1"->"1" "ProjectService"
"CreateUsController" .>"ProjectDto"
"ProjectService" "1"->"1" "ProductBacklog"

@enduml