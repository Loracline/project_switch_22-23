@startuml
skinparam sequenceMessageAlign center
title TO LIST ALL PROJECTS
legend top
US015 - As a Manager, I want to get a list of all projects
end legend
autonumber
actor Manager
participant ":ListProjectUI" as ui
participant ":ListProjectController" as controller
participant ":Service" as ser
participant ":Company" as company
participant ":AccountContainer" as ac
participant "Account:Account" as a
participant ":ProjectContainer" as container
participant ":ProjectMapper" as mapper
participant "listAllProjectsDTO: List<ProjectDTO>" as list
participant "projectDTO:projectDTO" as DTO

activate Manager
Manager -> ui: List all projects
activate ui
ui -> controller: listAllProjects(email)
activate controller
controller -> ser: listAllProjects (email)
activate ser
 ser -> company: validateManager(email)
 activate company
 company -> ac: validateManager(email)
  activate ac
 ac -> ac: account=getAccountByEmail(email)
 ac -> a: validateManager(email)
 activate a
 a -->> ac: true
 deactivate a
 ac -->> company: true
 deactivate ac
 company -->> ser: true
 deactivate company
ser -> company: listAllProjects()
activate company
company -> container: listAllProjects()
activate container
container -->> company: listAllProjects
deactivate container
company -->> ser: listAllProjects
deactivate company
ser -->> controller: listAllProjects
deactivate ser
controller -> mapper: toDTO(listAllProjects)
activate mapper
create list
mapper --> list: create ()
loop for each project in projectContainer
mapper -> container: project = get(i)
activate container
container --> mapper: project
deactivate container
mapper -> mapper : projectDTO = toDTO (project)
create DTO
mapper --> DTO : create()
mapper ->list :add(projectDTO)
list --> mapper : true
end loop
mapper --> controller :listAllProjectsDTO
deactivate mapper
controller -->> ui: listAllProjectsDTO
deactivate controller
ui -->>Manager: showListAllProjects
deactivate ui
@enduml