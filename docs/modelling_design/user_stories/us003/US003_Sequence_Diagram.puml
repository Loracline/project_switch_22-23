
@startuml

/'autonumber'/
actor Administrator
participant ":ChangeProfileUI" as ui
participant ":ChangeProfileController" as Controller
participant ":Repository" as repository
participant "account :Account" as account

activate Administrator
Administrator -> ui: 1. changes account profile
activate ui
Administrator <-- ui: 1.1. requests data (e-mail, profileName)
deactivate ui
Administrator -> ui: 2.  enters account data
activate ui
ui -> Controller: 2.1. changeProfile(e-mail, profileName)
activate Controller
Controller -> repository: 2.1.1. changeProfile(e-mail, profileName)
activate repository
repository -> repository: 2.1.1.1. profile = getProfile(profileName)
repository -> repository: 2.1.1.2. doesEmailExist(e-mail)
repository -> repository: 2.1.1.3. account = getAccount(e-mail)


create account
repository -> account: 2.1.1.4. changeProfile(profile)
deactivate Controller
deactivate repository


ui --> Administrator: 3. informs profile update
deactivate ui
deactivate Administrator

/'Controller -> Controller: isUserValid (e-mail)
Controller -> Controller: isProfileValid (profile)

Controller --> account: changeProfile (e-mail, profile)'/

@enduml